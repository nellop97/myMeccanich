// metro.config.js
const { getDefaultConfig } = require('expo/metro-config');
const path = require('path');

const config = getDefaultConfig(__dirname);

// Aggiungi estensioni web
config.resolver.sourceExts = [...config.resolver.sourceExts, 'web.js', 'web.ts', 'web.tsx'];

// Configurazione per gestire Firebase e import.meta
config.transformer = {
  ...config.transformer,
  babelTransformerPath: require.resolve('./metro.transformer.js'),
};

// Alias per moduli problematici
config.resolver.extraNodeModules = {
  ...config.resolver.extraNodeModules,
  '@firebase': path.resolve(__dirname, 'node_modules/@firebase'),
  'firebase': path.resolve(__dirname, 'node_modules/firebase'),
};

module.exports = config;